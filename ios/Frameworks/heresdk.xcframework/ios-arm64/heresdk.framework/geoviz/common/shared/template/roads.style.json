{
    "extends": ["railroads.style.json"],
    "styles": [
        {
            "id": "road_labels",
            "styleSet": "tilezen_lines",
            "when": [
                "all",
                ["ref", "Is.Road"],
                [
                    "any",
                    ["ref", "PedestrianWay"],
                    ["ref", "Walkway"],
                    ["ref", "StreetCategory4"],
                    ["ref", "StreetCategory3"],
                    ["ref", "StreetCategory2"],
                    ["ref", "StreetCategory1"],
                    ["ref", "StreetCategory0"]
                ],
                ["!", ["ref", "Is.RailFerry"]]
            ],
            "technique": "text",
            "description": "Road Labels",
            "minZoomLevel": ["ref", "StreetMinZoomLevel"],
            "category": [
                "case",
                ["ref", "PedestrianWay"],
                "pedestrian-labels",
                ["ref", "Walkway"],
                "walkway-labels",
                ["ref", "StreetCategory4"],
                "road4-labels",
                ["ref", "StreetCategory3"],
                "road3-labels",
                ["ref", "StreetCategory2"],
                "road2-labels",
                ["ref", "StreetCategory1"],
                "road1-labels",
                ["ref", "StreetCategory0"],
                "road0-labels",
                null
            ],
            "attr": {
                "margin": ["ref", "defaultMargin"],
                "far-threshold-range": 0.015,
                "fade-time": 0.3,
                "outline-size": [
                    "case",
                    ["ref", "PedestrianWay"],
                    ["ppi-scale", ["ref", "Street.Pedestrian.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    ["ref", "Walkway"],
                    ["ppi-scale", ["ref", "Street.Walkway.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory4"],
                    ["ppi-scale", ["ref", "Street.Category4.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory3"],
                    ["ppi-scale", ["ref", "Street.Category3.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory2"],
                    ["ppi-scale", ["ref", "Street.Category2.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory1"],
                    ["ppi-scale", ["ref", "Street.Category1.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory0"],
                    ["ppi-scale", ["ref", "Street.Category0.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                    null
                ],
                "vertical-alignment": "Dynamic",
                "polyline-padding-px": 2,
                "replaceable": true,
                "new-label-spread-frames": 10,
                "anchor-point-density": ["step", ["zoom"],
                    5,
                    8, 20,
                    16, 40],
                "line-width": [
                    "case",
                    ["ref", "PedestrianWay"],
                    ["ref", "pedestrianOnlyLineWidthZoom"],
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Pedestrian.UnpavedWidth"]],
                    ["ref", "Walkway"],
                    ["ref", "walkwayLineWidthZoom"],
                    ["all", ["ref", "Walkway"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Walkway.UnpavedWidth"]],
                    ["ref", "StreetCategory4"],
                    ["ref", "road4LineWidthZoom"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category4.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category4.RampWidth"]],
                    ["ref", "StreetCategory3"],
                    ["ref", "road3LineWidthZoom"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category3.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category3.RampWidth"]],
                    ["ref", "StreetCategory2"],
                    ["ref", "road2LineWidthZoom"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category2.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category2.RampWidth"]],
                    ["ref", "StreetCategory1"],
                    ["ref", "road1LineWidthZoom"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category1.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category1.RampWidth"]],
                    ["ref", "StreetCategory0"],
                    ["ref", "road0LineWidthZoom"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category0.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category0.RampWidth"]],
                    null
                ],
                "softdepth": ["ref", "softDepthThreshold"],
                "outline-color": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Pedestrian.FontStyle.UnpavedOutlineColor"],
                    ["ref", "PedestrianWay"],
                    ["ref", "Street.Pedestrian.FontStyle.OutlineColor"],
                    ["all", ["ref", "Walkway"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Walkway.FontStyle.UnpavedOutlineColor"],
                    ["ref", "Walkway"],
                    ["ref", "Street.Walkway.FontStyle.OutlineColor"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category4.FontStyle.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category4.FontStyle.TollOutlineColor"],
                    ["ref", "StreetCategory4"],
                    ["ref", "Street.Category4.FontStyle.OutlineColor"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category3.FontStyle.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category3.FontStyle.TollOutlineColor"],
                    ["ref", "StreetCategory3"],
                    ["ref", "Street.Category3.FontStyle.OutlineColor"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category2.FontStyle.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category2.FontStyle.TollOutlineColor"],
                    ["ref", "StreetCategory2"],
                    ["ref", "Street.Category2.FontStyle.OutlineColor"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category1.FontStyle.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category1.FontStyle.TollOutlineColor"],
                    ["ref", "StreetCategory1"],
                    ["ref", "Street.Category1.FontStyle.OutlineColor"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category0.FontStyle.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category0.FontStyle.TollOutlineColor"],
                    ["ref", "StreetCategory0"],
                    ["ref", "Street.Category0.FontStyle.OutlineColor"],
                    null
                ],
                "far-threshold": 0.85,
                "color": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Pedestrian.FontStyle.UnpavedColor"],
                    ["ref", "PedestrianWay"],
                    ["ref", "Street.Pedestrian.FontStyle.Color"],
                    ["all", ["ref", "Walkway"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Walkway.FontStyle.UnpavedColor"],
                    ["ref", "Walkway"],
                    ["ref", "Street.Walkway.FontStyle.Color"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category4.FontStyle.UnpavedColor"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category4.FontStyle.TollColor"],
                    ["ref", "StreetCategory4"],
                    ["ref", "Street.Category4.FontStyle.Color"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category3.FontStyle.UnpavedColor"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category3.FontStyle.TollColor"],
                    ["ref", "StreetCategory3"],
                    ["ref", "Street.Category3.FontStyle.Color"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category2.FontStyle.UnpavedColor"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category2.FontStyle.TollColor"],
                    ["ref", "StreetCategory2"],
                    ["ref", "Street.Category2.FontStyle.Color"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category1.FontStyle.UnpavedColor"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category1.FontStyle.TollColor"],
                    ["ref", "StreetCategory1"],
                    ["ref", "Street.Category1.FontStyle.Color"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category0.FontStyle.UnpavedColor"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category0.FontStyle.TollColor"],
                    ["ref", "StreetCategory0"],
                    ["ref", "Street.Category0.FontStyle.Color"],
                    null
                ],
                "size": [
                    "case",
                    ["ref", "PedestrianWay"],
                    ["ppi-scale", ["ref", "Street.Pedestrian.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    ["ref", "Walkway"],
                    ["ppi-scale", ["ref", "Street.Walkway.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Ramp"]],
                    ["ppi-scale", ["ref", "Street.Category4.FontStyle.RampSize"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory4"],
                    ["ppi-scale", ["ref", "Street.Category4.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Ramp"]],
                    ["ppi-scale", ["ref", "Street.Category3.FontStyle.RampSize"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory3"],
                    ["ppi-scale", ["ref", "Street.Category3.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Ramp"]],
                    ["ppi-scale", ["ref", "Street.Category2.FontStyle.RampSize"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory2"],
                    ["ppi-scale", ["ref", "Street.Category2.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Ramp"]],
                    ["ppi-scale", ["ref", "Street.Category1.FontStyle.RampSize"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory1"],
                    ["ppi-scale", ["ref", "Street.Category1.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Ramp"]],
                    ["ppi-scale", ["ref", "Street.Category0.FontStyle.RampSize"], ["ref", "ScalePpi.labels"]],
                    ["ref", "StreetCategory0"],
                    ["ppi-scale", ["ref", "Street.Category0.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                    null
                ],
                "font": ["ref", "defaultFont"],
                "shape": "line",
                "persisting-margin-reducing": ["ref", "defaultPersistingMarginReducing"]
            }
        },
        {
            "id": "ferry_labels",
            "styleSet": "tilezen_lines",
            "when": ["ref", "Ferry"],
            "technique": "text",
            "description": "Ferry Labels",
            "category": "ferry-labels",
            "attr": {
                "margin": ["ref", "defaultMargin"],
                "far-threshold-range": 0.015,
                "fade-time": 0.3,
                "outline-size": ["ppi-scale", ["ref", "Ferry.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                "vertical-alignment": "Top",
                "polyline-padding-px": 2,
                "replaceable": true,
                "new-label-spread-frames": 10,
                "softdepth": ["ref", "softDepthThreshold"],
                "outline-color": ["ref", "Ferry.FontStyle.OutlineColor"],
                "far-threshold": 0.85,
                "color": ["ref", "Ferry.FontStyle.Color"],
                "size": ["ppi-scale", ["ref", "Ferry.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                "font": ["ref", "defaultFont"],
                "shape": "line",
                "persisting-margin-reducing": ["ref", "defaultPersistingMarginReducing"]
            }
        },
        {
            "id": "road_outlines",
            "styleSet": "tilezen_lines",
            "when": [
                "all",
                ["ref", "Is.Road"],
                ["!", ["ref", "Is.AlsoPolygon"]],
                ["!", ["ref", "Is.RailFerry"]],
                [
                    "any",
                    [
                        "all",
                        ["ref", "Is.Tunnel"],
                        ["!", ["ref", "Is.UnderConstruction"]]
                    ],
                    ["ref", "PedestrianWay"],
                    ["ref", "Walkway"],
                    ["ref", "StreetCategory4"],
                    ["ref", "StreetCategory3"],
                    ["ref", "StreetCategory2"],
                    ["ref", "StreetCategory1"],
                    ["ref", "StreetCategory0"]
                ]
            ],
            "technique": "line",
            "description": "road_outline",
            "minZoomLevel": ["ref", "StreetOutlineMinZoomLevel"],
            "category": [
                "case",
                ["all", ["ref", "PedestrianWay"], ["ref", "Is.Bridge"]],
                "bridge-outline-pedestrian",
                ["all", ["ref", "PedestrianWay"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-pedestrian",
                ["ref", "PedestrianWay"],
                "pedestrian-outline",
                ["all", ["ref", "Walkway"], ["ref", "Is.Bridge"]],
                "bridge-outline-walkway",
                ["all", ["ref", "Walkway"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-walkway",
                ["ref", "Walkway"],
                "walkway-outline",
                ["all", ["ref", "StreetCategory4"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-4",
                ["all", ["ref", "StreetCategory4"], ["ref", "Is.Bridge"]],
                "bridge-outline-4",
                ["ref", "StreetCategory4"],
                "road-outline-4",
                ["all", ["ref", "StreetCategory3"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-3",
                ["all", ["ref", "StreetCategory3"], ["ref", "Is.Bridge"]],
                "bridge-outline-3",
                ["ref", "StreetCategory3"],
                "road-outline-3",
                ["all", ["ref", "StreetCategory2"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-2",
                ["all", ["ref", "StreetCategory2"], ["ref", "Is.Bridge"]],
                "bridge-outline-2",
                ["ref", "StreetCategory2"],
                "road-outline-2",
                ["all", ["ref", "StreetCategory1"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-1",
                ["all", ["ref", "StreetCategory1"], ["ref", "Is.Bridge"]],
                "bridge-outline-1",
                ["ref", "StreetCategory1"],
                "road-outline-1",
                ["all", ["ref", "StreetCategory0"], ["ref", "Is.Tunnel"]],
                "tunnel-outline-0",
                ["all", ["ref", "StreetCategory0"], ["ref", "Is.Bridge"]],
                "bridge-outline-0",
                ["ref", "StreetCategory0"],
                "road-outline-0",
                null
            ],
            "attr": {
                "cap": [
                    "case",
                    [
                        "any",
                        ["all", ["ref", "PedestrianWay"], ["ref", "Is.UnderConstruction"]],
                        ["ref", "PedestrianWay"],
                        ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory4"], ["ref", "Is.Bridge"]],
                        ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory3"], ["ref", "Is.Bridge"]],
                        ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory2"], ["ref", "Is.Bridge"]],
                        ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory1"], ["ref", "Is.Bridge"]],
                        ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory0"], ["ref", "Is.Bridge"]]
                    ],
                    "butt",
                    null
                ],
                "dasharray": [
                    "case",
                    [
                        "all",
                        ["ref", "Is.Tunnel"],
                        ["!", ["ref", "Is.UnderConstruction"]]
                    ],
                    ["ref", "Tunnel.DashArray"],
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["ref", "PedestrianWay"],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.LineLength"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.GapLength"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Walkway.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Walkway.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category4.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category4.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category3.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category3.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category2.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category2.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category1.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category1.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionDash"]],
                        0,
                        0
                    ],
                    null
                ],
                "fillcolor": [
                    "case",
                    [
                        "all",
                        ["ref", "Is.Tunnel"],
                        ["!", ["ref", "Is.UnderConstruction"]]
                    ],
                    "#00000000",
                    [
                        "any",
                        ["all", ["ref", "PedestrianWay"], ["ref", "Is.UnderConstruction"]],
                        ["ref", "PedestrianWay"],
                        ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]]
                    ],
                    ["ref", "transparent"],
                    null
                ],
                "width": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Pedestrian.UnpavedOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Pedestrian.UnpavedOutlineWidth"]],
                                ["ref", "Street.Pedestrian.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["ref", "PedestrianWay"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Pedestrian.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Pedestrian.Outline.Width"]],
                                ["ref", "Street.Pedestrian.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "Walkway"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Walkway.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Walkway.UnpavedOutlineWidth"]],
                                ["ref", "Street.Walkway.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["ref", "Walkway"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Walkway.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Walkway.Outline.Width"]],
                                ["ref", "Street.Walkway.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category4.UnpavedOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category4.UnpavedOutlineWidth"]],
                                ["ref", "Street.Category4.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category4.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category4.RampOutlineWidth"]],
                                ["ref", "Street.Category4.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory4"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category4.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category4.Outline.Width"]],
                                ["ref", "Street.Category4.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category3.UnpavedOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category3.UnpavedOutlineWidth"]],
                                ["ref", "Street.Category3.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category3.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category3.RampOutlineWidth"]],
                                ["ref", "Street.Category3.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory3"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category3.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category3.Outline.Width"]],
                                ["ref", "Street.Category3.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category2.UnpavedOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category2.UnpavedOutlineWidth"]],
                                ["ref", "Street.Category2.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category2.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category2.RampOutlineWidth"]],
                                ["ref", "Street.Category2.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory2"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category2.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category2.Outline.Width"]],
                                ["ref", "Street.Category2.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category1.UnpavedOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category1.UnpavedOutlineWidth"]],
                                ["ref", "Street.Category1.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category1.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category1.RampOutlineWidth"]],
                                ["ref", "Street.Category1.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory1"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category1.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category1.Outline.Width"]],
                                ["ref", "Street.Category1.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Unpaved"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category0.UnpavedOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category0.UnpavedOutlineWidth"]],
                                ["ref", "Street.Category0.UnpavedWidth"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category0.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category0.RampOutlineWidth"]],
                                ["ref", "Street.Category0.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory0"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category0.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                ["*", 2, ["ref", "Street.Category0.Outline.Width"]],
                                ["ref", "Street.Category0.Width"]
                            ]
                        ]
                    ],
                    null
                ],
                "color": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Pedestrian.UnpavedOutlineColor"],
                    ["ref", "PedestrianWay"],
                    ["ref", "Street.Pedestrian.OutlineColor"],
                    ["all", ["ref", "Walkway"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Walkway.UnpavedOutlineColor"],
                    ["ref", "Walkway"],
                    ["ref", "Street.Walkway.OutlineColor"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Tunnel"]],
                    ["ref", "Street.Category4.TunnelOutlineColor"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category4.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category4.TollOutlineColor"],
                    ["ref", "StreetCategory4"],
                    ["ref", "Street.Category4.OutlineColor"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Tunnel"]],
                    ["ref", "Street.Category3.TunnelOutlineColor"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category3.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category3.TollOutlineColor"],
                    ["ref", "StreetCategory3"],
                    ["ref", "Street.Category3.OutlineColor"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Tunnel"]],
                    ["ref", "Street.Category2.TunnelOutlineColor"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category2.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category2.TollOutlineColor"],
                    ["ref", "StreetCategory2"],
                    ["ref", "Street.Category2.OutlineColor"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Tunnel"]],
                    ["ref", "Street.Category1.TunnelOutlineColor"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category1.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category1.TollOutlineColor"],
                    ["ref", "StreetCategory1"],
                    ["ref", "Street.Category1.OutlineColor"],
                    [
                        "all",
                        ["ref", "StreetCategory0"],
                        ["ref", "Is.Tunnel"],
                        ["!", ["ref", "Is.Toll"]]
                    ],
                    ["ref", "Street.Category0.TunnelOutlineColor"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Unpaved"]],
                    ["ref", "Street.Category0.UnpavedOutlineColor"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Toll"], ["ref", "Is.Tunnel"]],
                    ["ref", "Street.Category0.TollTunnelOutlineColor"],
                    [
                        "all",
                        ["ref", "StreetCategory0"],
                        ["ref", "Is.Toll"],
                        ["!", ["ref", "Is.Tunnel"]]
                    ],
                    ["ref", "Street.Category0.TollOutlineColor"],
                    [
                        "all",
                        ["ref", "StreetCategory0"],
                        ["!", ["ref", "Is.Toll"]]
                    ],
                    ["ref", "Street.Category0.OutlineColor"],
                    null
                ],
                "smooth-steps": [
                    "case",
                    [
                        "any",
                        [
                            "all",
                            ["ref", "Is.Tunnel"],
                            ["!", ["ref", "Is.UnderConstruction"]]
                        ],
                        ["ref", "PedestrianWay"]
                    ],
                    ["make-vector", 4, 0.5],
                    ["ref", "Walkway"],
                    ["make-vector", 4, 0.75],
                    null
                ]
            }
        },
        {
            "id": "bridge_extra_outlines",
            "styleSet": "tilezen_lines",
            "when": [
                "all",
                ["ref", "Is.Road"],
                ["ref", "Is.Bridge"],
                ["!", ["ref", "Is.AlsoPolygon"]],
                ["!", ["ref", "Is.RailFerry"]],
                [
                    "any",
                    ["ref", "PedestrianWay"],
                    ["ref", "Walkway"],
                    ["ref", "StreetCategory4"],
                    ["ref", "StreetCategory3"],
                    ["ref", "StreetCategory2"],
                    ["ref", "StreetCategory1"],
                    ["ref", "StreetCategory0"]
                ]
            ],
            "technique": "line",
            "description": "bridge_extra_outline",
            "minZoomLevel": ["ref", "StreetBridgeOutlineMinZoomLevel"],
            "category": [
                "case",
                ["ref", "PedestrianWay"],
                "bridge-outline-pedestrian-extra",
                ["ref", "Walkway"],
                "bridge-outline-walkway-extra",
                ["ref", "StreetCategory4"],
                "bridge-outline-4-extra",
                ["ref", "StreetCategory3"],
                "bridge-outline-3-extra",
                ["ref", "StreetCategory2"],
                "bridge-outline-2-extra",
                ["ref", "StreetCategory1"],
                "bridge-outline-1-extra",
                ["ref", "StreetCategory0"],
                "bridge-outline-0-extra",
                null
            ],
            "attr": {
                "cap": "butt",
                "width": [
                    "case",
                    ["ref", "PedestrianWay"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Pedestrian.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Pedestrian.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Pedestrian.Outline.Width"]]
                                ],
                                ["ref", "Street.Pedestrian.Width"]
                            ]
                        ]
                    ],
                    ["ref", "Walkway"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Walkway.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Walkway.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Walkway.Outline.Width"]]
                                ],
                                ["ref", "Street.Walkway.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category4.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category4.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category4.RampOutlineWidth"]]
                                ],
                                ["ref", "Street.Category4.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory4"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category4.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category4.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category4.Outline.Width"]]
                                ],
                                ["ref", "Street.Category4.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category3.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category3.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category3.RampOutlineWidth"]]
                                ],
                                ["ref", "Street.Category3.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory3"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category3.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category3.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category3.Outline.Width"]]
                                ],
                                ["ref", "Street.Category3.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category2.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category2.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category2.RampOutlineWidth"]]
                                ],
                                ["ref", "Street.Category2.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory2"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category2.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category2.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category2.Outline.Width"]]
                                ],
                                ["ref", "Street.Category2.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category1.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category1.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category1.RampOutlineWidth"]]
                                ],
                                ["ref", "Street.Category1.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory1"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category1.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category1.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category1.Outline.Width"]]
                                ],
                                ["ref", "Street.Category1.Width"]
                            ]
                        ]
                    ],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Ramp"]],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category0.RampOutlineWidth"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category0.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category0.RampOutlineWidth"]]
                                ],
                                ["ref", "Street.Category0.RampWidth"]
                            ]
                        ]
                    ],
                    ["ref", "StreetCategory0"],
                    [
                        "case",
                        ["<=", ["ref", "Street.Category0.Outline.Width"], 0],
                        0,
                        [
                            "world-ppi-scale",
                            [
                                "+",
                                [
                                    "+",
                                    ["*", 2, ["ref", "Street.Category0.BridgeOutlineWidth"]],
                                    ["*", 2, ["ref", "Street.Category0.Outline.Width"]]
                                ],
                                ["ref", "Street.Category0.Width"]
                            ]
                        ]
                    ],
                    null
                ],
                "color": [
                    "case",
                    ["ref", "PedestrianWay"],
                    ["ref", "Street.Pedestrian.BridgeColor"],
                    ["ref", "Walkway"],
                    ["ref", "Street.Walkway.BridgeColor"],
                    ["ref", "StreetCategory4"],
                    ["ref", "Street.Category4.BridgeColor"],
                    ["ref", "StreetCategory3"],
                    ["ref", "Street.Category3.BridgeColor"],
                    ["ref", "StreetCategory2"],
                    ["ref", "Street.Category2.BridgeColor"],
                    ["ref", "StreetCategory1"],
                    ["ref", "Street.Category1.BridgeColor"],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Toll"]],
                    ["ref", "Street.Category0.TollBridgeColor"],
                    [
                        "all",
                        ["ref", "StreetCategory0"],
                        ["!", ["ref", "Is.Toll"]]
                    ],
                    ["ref", "Street.Category0.BridgeColor"],
                    null
                ],
                "dasharray": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["ref", "PedestrianWay"],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.LineLength"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.GapLength"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Walkway.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Walkway.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category4.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category4.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category3.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category3.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category2.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category2.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category1.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category1.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionDash"]],
                        0,
                        0
                    ],
                    null
                ],
                "fillcolor": ["ref", "transparent"]
            }
        },
        {
            "id": "center_lines",
            "styleSet": "tilezen_lines",
            "when": [
                "all",
                ["ref", "Is.Road"],
                ["!", ["ref", "Is.AlsoPolygon"]],
                ["ref", "StreetCategory0"],
                ["!", ["ref", "Is.Ramp"]]
            ],
            "technique": "line",
            "description": "center",
            "category": [
                "case",
                ["ref", "Is.Bridge"],
                "bridge-0-center",
                ["ref", "Is.Tunnel"],
                "tunnel-0-center",
                "road-0-center"
            ],
            "attr": {
                "cap": [
                    "case",
                    ["ref", "Is.UnderConstruction"],
                    "butt",
                    null
                ],
                "dasharray": [
                    "case",
                    ["ref", "Is.UnderConstruction"],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionDash"]],
                        0,
                        0
                    ],
                    null
                ],
                "fillcolor": [
                    "case",
                    ["ref", "Is.UnderConstruction"],
                    ["ref", "transparent"],
                    null
                ],
                "width": ["ref", "road0CenterLineWidthZoom"],
                "color": [
                    "case",
                    [
                        "all",
                        ["ref", "Is.Tunnel"],
                        ["!", ["ref", "Is.Toll"]]
                    ],
                    ["ref", "Street.Category0.CenterLine.TunnelColor"],
                    [
                        "all",
                        ["ref", "Is.Toll"],
                        ["!", ["ref", "Is.Tunnel"]]
                    ],
                    ["ref", "Street.Category0.TollCenterlineColor"],
                    ["all", ["ref", "Is.Toll"], ["ref", "Is.Tunnel"]],
                    ["ref", "Street.Category0.TollTunnelCenterlineColor"],
                    ["ref", "Street.Category0.CenterLine.Color"]
                ],
                "smooth-steps": ["make-vector", 4, 0.75]
            }
        },
        {
            "id": "roads",
            "styleSet": "tilezen_lines",
            "when": [
                "all",
                ["ref", "Is.Road"],
                ["!", ["ref", "Is.AlsoPolygon"]],
                ["!", ["ref", "Is.RailFerry"]],
                [
                    "any",
                    ["ref", "PedestrianWay"],
                    ["ref", "Walkway"],
                    ["ref", "StreetCategory4"],
                    ["ref", "StreetCategory3"],
                    ["ref", "StreetCategory2"],
                    ["ref", "StreetCategory1"],
                    ["ref", "StreetCategory0"]
                ]
            ],
            "technique": "line",
            "description": "road",
            "minZoomLevel": ["ref", "StreetMinZoomLevel"],
            "category": ["ref", "StreetCategory"],
            "attr": {
                "cap": [
                    "case",
                    [
                        "any",
                        ["all", ["ref", "PedestrianWay"], ["ref", "Is.UnderConstruction"]],
                        ["ref", "PedestrianWay"],
                        ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]]
                    ],
                    "butt",
                    null
                ],
                "dasharray": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["ref", "PedestrianWay"],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.LineLength"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Pedestrian.GapLength"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Walkway.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Walkway.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category4.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category4.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category3.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category3.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category2.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category2.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category1.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category1.ConstructionDash"]],
                        0,
                        0
                    ],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]],
                    [
                        "make-vector",
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionGap"]],
                        ["world-discrete-ppi-scale", ["ref", "Street.Category0.ConstructionDash"]],
                        0,
                        0
                    ],
                    [
                        "all",
                        ["ref", "Is.OneWay"],
                        ["ref", "ShowOnewayArrows"],
                        ["none", ["ref", "PedestrianWay"], ["ref", "Walkway"]]
                    ],
                    [
                        "make-vector",
                        0,
                        ["world-discrete-ppi-scale", ["ref", "OnewayArrowGapLenth"]],
                        ["world-ppi-scale", ["ref", "OneWayArrowLength"]],
                        [
                            "-",
                            [
                                "world-discrete-ppi-scale",
                                ["+", ["ref", "OnewayArrowGapLenth"], ["ref", "OneWayArrowLength"]]
                            ],
                            ["world-ppi-scale", ["ref", "OneWayArrowLength"]]
                        ]
                    ],
                    null
                ],
                "fillcolor": [
                    "case",
                    [
                        "any",
                        ["ref", "PedestrianWay"],
                        ["all", ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory4"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory3"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory2"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory1"], ["ref", "Is.UnderConstruction"]],
                        ["all", ["ref", "StreetCategory0"], ["ref", "Is.UnderConstruction"]]
                    ],
                    ["ref", "transparent"],
                    ["ref", "Walkway"],
                    null,
                    ["ref", "Is.OneWay"],
                    [
                        "case",
                        ["ref", "StreetCategory0"],
                        [
                            "case",
                            ["ref", "Is.Toll"],
                            ["ref", "Street.Category0.ArrowTollColor"],
                            ["ref", "Is.Unpaved"],
                            ["ref", "Street.Category0.ArrowUnpavedColor"],
                            ["ref", "Street.Category0.ArrowColor"]
                        ],
                        ["ref", "StreetCategory1"],
                        [
                            "case",
                            ["ref", "Is.Toll"],
                            ["ref", "Street.Category1.ArrowTollColor"],
                            ["ref", "Is.Unpaved"],
                            ["ref", "Street.Category1.ArrowUnpavedColor"],
                            ["ref", "Street.Category1.ArrowColor"]
                        ],
                        ["ref", "StreetCategory2"],
                        [
                            "case",
                            ["ref", "Is.Toll"],
                            ["ref", "Street.Category2.ArrowTollColor"],
                            ["ref", "Is.Unpaved"],
                            ["ref", "Street.Category2.ArrowUnpavedColor"],
                            ["ref", "Street.Category2.ArrowColor"]
                        ],
                        ["ref", "StreetCategory3"],
                        [
                            "case",
                            ["ref", "Is.Toll"],
                            ["ref", "Street.Category3.ArrowTollColor"],
                            ["ref", "Is.Unpaved"],
                            ["ref", "Street.Category3.ArrowUnpavedColor"],
                            ["ref", "Street.Category3.ArrowColor"]
                        ],
                        ["ref", "StreetCategory4"],
                        [
                            "case",
                            ["ref", "Is.Toll"],
                            ["ref", "Street.Category4.ArrowTollColor"],
                            ["ref", "Is.Unpaved"],
                            ["ref", "Street.Category4.ArrowUnpavedColor"],
                            ["ref", "Street.Category4.ArrowColor"]
                        ],
                        null
                    ],
                    null
                ],
                "dummy": [
                    "case",
                    ["all", ["ref", "Walkway"], ["ref", "Is.Bridge"]],
                    0,
                    null
                ],
                "width": [
                    "case",
                    ["all", ["ref", "PedestrianWay"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Pedestrian.UnpavedWidth"]],
                    ["ref", "PedestrianWay"],
                    ["world-ppi-scale", ["ref", "Street.Pedestrian.Width"]],
                    ["all", ["ref", "Walkway"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Walkway.UnpavedWidth"]],
                    ["ref", "Walkway"],
                    ["world-ppi-scale", ["ref", "Street.Walkway.Width"]],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category4.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory4"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category4.RampWidth"]],
                    ["ref", "StreetCategory4"],
                    ["world-ppi-scale", ["ref", "Street.Category4.Width"]],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category3.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory3"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category3.RampWidth"]],
                    ["ref", "StreetCategory3"],
                    ["world-ppi-scale", ["ref", "Street.Category3.Width"]],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category2.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory2"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category2.RampWidth"]],
                    ["ref", "StreetCategory2"],
                    ["world-ppi-scale", ["ref", "Street.Category2.Width"]],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category1.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory1"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category1.RampWidth"]],
                    ["ref", "StreetCategory1"],
                    ["world-ppi-scale", ["ref", "Street.Category1.Width"]],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Unpaved"]],
                    ["world-ppi-scale", ["ref", "Street.Category0.UnpavedWidth"]],
                    ["all", ["ref", "StreetCategory0"], ["ref", "Is.Ramp"]],
                    ["world-ppi-scale", ["ref", "Street.Category0.RampWidth"]],
                    ["ref", "StreetCategory0"],
                    ["world-ppi-scale", ["ref", "Street.Category0.Width"]],
                    null
                ],
                "color": ["ref", "StreetColor"],
                "smooth-steps": [
                    "case",
                    ["ref", "PedestrianWay"],
                    ["make-vector", 4, 0.5],
                    ["ref", "Walkway"],
                    ["make-vector", 4, 0.75],
                    ["make-vector", 4, 0.75]
                ],
                "dash-image": [
                    "case",
                    [
                        "all",
                        ["ref", "Is.OneWay"],
                        ["ref", "ShowOnewayArrows"],
                        ["none", ["ref", "PedestrianWay"], ["ref", "Walkway"], ["ref", "Is.UnderConstruction"]]
                    ],
                    ["concat", ["ref", "one_way_arrowIconLookup"], ".svg"],
                    null
                ]
            }
        },
        {
            "id": "roads-simple_line",
            "styleSet": "tilezen_lines",
            "when": [
                "all",
                ["ref", "Is.Road"],
                ["!", ["ref", "Is.AlsoPolygon"]],
                [
                    "any",
                    ["ref", "PedestrianWay"],
                    ["ref", "Walkway"],
                    ["ref", "StreetCategory4"],
                    ["ref", "StreetCategory3"]
                ]
            ],
            "technique": "simple_line",
            "description": "roads as simple lines",
            "minZoomLevel": ["ref", "StreetSimpleLineMinZoomLevel"],
            "maxZoomLevel": ["ref", "StreetSimpleLineMaxZoomLevel"],
            "category": ["ref", "StreetCategory"],
            "attr": {
                "color": ["ref", "StreetColor"]
            }
        },
        {
            "id": "ferry_lines",
            "styleSet": "tilezen_lines",
            "when": ["ref", "Ferry"],
            "technique": "line",
            "description": "Ferry",
            "category": "ferry",
            "attr": {
                "dasharray": ["ref", "Ferry.DashArray"],
                "fillcolor": ["ref", "Ferry.PolylineStyles.SecondaryColor"],
                "width": ["world-ppi-scale", ["ref", "Ferry.PolylineStyles.Width"]],
                "color": ["ref", "Ferry.PolylineStyles.Color"],
                "smooth-steps": ["make-vector", 4, 0.5]
            }
        },
        {
            "id": "rail_ferry_labels",
            "styleSet": "tilezen_lines",
            "when": ["ref", "Is.RailFerry"],
            "technique": "text",
            "description": "Railferry Labels",
            "category": "rail-labels",
            "attr": {
                "margin": ["ref", "defaultMargin"],
                "far-threshold-range": 0.015,
                "fade-time": 0.3,
                "outline-size": ["ppi-scale", ["ref", "Rail.FontStyle.OutlineWidth"], ["ref", "ScalePpi.labels"]],
                "vertical-alignment": "Top",
                "polyline-padding-px": 2,
                "replaceable": true,
                "new-label-spread-frames": 10,
                "softdepth": ["ref", "softDepthThreshold"],
                "outline-color": ["ref", "Rail.FontStyle.OutlineColor"],
                "far-threshold": 0.85,
                "color": ["ref", "Rail.FontStyle.Color"],
                "size": ["ppi-scale", ["ref", "Rail.FontStyle.Size"], ["ref", "ScalePpi.labels"]],
                "font": ["ref", "defaultFont"],
                "shape": "line",
                "persisting-margin-reducing": ["ref", "defaultPersistingMarginReducing"]
            }
        },
        {
            "id": "rail_ferry_outlines",
            "styleSet": "tilezen_lines",
            "when": ["ref", "Is.RailFerry"],
            "technique": "line",
            "description": "Railferry Outlines",
            "category": "rail-outline",
            "attr": {
                "width": ["world-ppi-scale", ["ref", "Rail.PolylineStyles.OutlineWidth"]],
                "color": ["ref", "Rail.PolylineStyles.OutlineColor"],
                "smooth-steps": ["make-vector", 4, 0.5]
            }
        },
        {
            "id": "rail_ferry_lines",
            "styleSet": "tilezen_lines",
            "when": ["ref", "Is.RailFerry"],
            "technique": "line",
            "description": "Railferry Lines",
            "category": "rail",
            "attr": {
                "cap": "butt",
                "dasharray": [
                    "make-vector",
                    ["world-discrete-ppi-scale", ["ref", "Rail.PolylineStyles.DashArray1"]],
                    ["world-discrete-ppi-scale", ["ref", "Rail.PolylineStyles.DashArray2"]],
                    0,
                    0
                ],
                "fillcolor": ["ref", "Rail.PolylineStyles.SecondaryColor"],
                "width": ["world-ppi-scale", ["ref", "Rail.PolylineStyles.Width"]],
                "color": ["ref", "Rail.PolylineStyles.Color"],
                "smooth-steps": ["make-vector", 4, 0.5]
            }
        }
    ]
}
